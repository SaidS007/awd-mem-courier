<div class="login-container">
  <div class="login-content" [class.showForm]="showForm" [style.background-image]="'url(../rest/images?image=loginPage)'">
    <div class="login-form">
      <mat-icon svgIcon="memLogoFull" class="memLogo"></mat-icon>
      <div style="color: white;font-size: 14px;" [innerHTML]="authService.loginMessage | safeHtml"></div>
      <p style="color: black;font-size: 14px;font-weight: bold;">{{authService.applicationName}}</p> <!-- // EDISSYUM - NCH01 Changement des couleurs de MEM Courrier | Changer white en black -->
      <form (ngSubmit)="this.authService.authMode === 'oidc' ? initConnection(true) : onSubmit()" [formGroup]="loginForm"><!-- EDISSYUM - NCH01 Ajout d'une méthode de connexion OIDC | Remplacer onSubmit() par this.authService.authMode === 'oidc' ? initConnection() : onSubmit() -->
        <div style="padding-left: 30px;padding-right: 30px;">
          <!-- EDISSYUM - NCH01 Ajout d'une méthode de connexion OIDC | Ajout de oidc -->
          @if (['cas', 'keycloak', 'sso', 'azure_saml', 'oidc'].indexOf(authService.authMode) === -1) {
            <mat-form-field class="input-row login" appearance="outline" style="padding-bottom: 0px;">
              <input autofocus id="login" name="login" matInput [placeholder]="'lang.id' | translate" formControlName="login"
                type="text">
            </mat-form-field>
          }
          <!-- EDISSYUM - NCH01 Ajout d'une méthode de connexion OIDC | Ajout de oidc -->
          @if (['cas', 'keycloak', 'sso', 'azure_saml', 'oidc'].indexOf(authService.authMode) === -1) {
            <mat-form-field class="input-row" appearance="outline">
              <input id="password" name="password" matInput [placeholder]="'lang.password' | translate"
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password" autocomplete="off">
              <button type="button" matSuffix mat-icon-button style="cursor: pointer; margin-right: 2px; color: #3A7C00; color: #3A7C00"
                (click)="$event.stopPropagation(); hidePassword = !hidePassword;" [title]="(hidePassword ? 'lang.showPassword' : 'lang.hidePassword') | translate"> <!-- EDISSYUM - ALO01 Amélioration RGAA | remplacement de la balise color par color: #3A7C00; dans la balise style -->
                <mat-icon class="fa fa-2x" style="color: #3A7C00;"
                  [ngClass]="[hidePassword ? 'fa-eye-slash' : 'fa-eye']"> <!-- EDISSYUM - ALO01 Amélioration RGAA | remplacement de la balise color par style="color: #3A7C00;" -->
                </mat-icon>
              </button>
              @if (authService.authMode === 'standard') {
                <mat-hint align="end"><a
                style="cursor: pointer;" (click)="goTo('/forgot-password')" class="infoLogin" href="index.html#/forgot-password">{{'lang.forgotPassword' | translate}} ?</a> <!-- EDISSYUM - ALO01 Amélioration RGAA | Rajout de la balise href -->
              </mat-hint>
            }
            @if (authService.authMode === 'ldap') {
              <mat-hint align="end"><span
              class="infoLogin">{{'lang.' + authService.authMode + 'Enabled' | translate}}</span></mat-hint>
            }
          </mat-form-field>
        }
      </div>
      <!-- EDISSYUM - NCH01 Ajout d'une méthode de connexion OIDC | Ajout de oidc -->
      @if (['cas', 'keycloak', 'sso', 'azure_saml', 'oidc'].indexOf(authService.authMode) > -1) {
        <div class="alert-message alert-message-info" role="alert" style="max-width: 100%;">
          {{'lang.' + authService.authMode + 'Enabled' | translate}}
        </div>
      }
      <button id="submit" type="submit" mat-stroked-button [disabled]="loginForm.invalid || loading"
      style="color: white;border-color: #3A7C00;background: #3A7C00; margin-bottom: 30px">{{'lang.LOGIN' | translate}}</button><!-- EDISSYUM - NCH01 Changement des couleurs de MEM Courrier | Ajout margin-bottom -->
    </form>
  </div>
  <footer style="padding: 8px; backdrop-filter: blur(8px)">
    <span style="display: block; background:rgba(0, 0, 0, 0.2); padding: 10px"> <!-- EDISSYUM - NCH01 Amélioration de l'affichage de version sur l'écran de connexion | Ajout du span -->
      <p style="margin: 0; color: white;cursor: default" [title]="'lang.applicationVersion' | translate : {version: environment?.VERSION, author: environment?.AUTHOR}"
        [innerHTML]="'lang.applicationVersion' | translate : {version: environment?.VERSION, author: environment?.AUTHOR}"><!-- EDISSYUM - NCH01 Amélioration de l'affichage de version sur l'écran de connexion | Rajout de margin: 0 dans la balise style -->
      </p>
    </span>
  </footer>
</div>
</div>
