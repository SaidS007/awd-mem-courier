<div class="mat-dialog-content-container">
  <h1 mat-dialog-title>{{data.action.label}}</h1>
  <div mat-dialog-content>
    @if (checking) {
      <div class="checking primary" style="display:flex;height:100%;justify-content: center;padding: 30px;">
        <mat-spinner diameter="24"></mat-spinner>&nbsp;{{'lang.checkInProgress' |Â translate}} ...
      </div>
    }
    @if (loading) {
      <div class="loading primary">
        <mat-spinner></mat-spinner>
      </div>
    }
    @if (!checking) {
      <div class="row">
        <div class="alert-message alert-message-info" role="alert" style="margin-top: 0px;" [innerHTML]="'lang.resetRecordManagementDesc' | translate"></div>
        @if (data.resIds.length > 0) {
          <div>
            {{'lang.makeActionOn' | translate}}
            @if (data.resIds.length === 0) {
              <b class="primary highlight">{{'lang.currentIndexingMail' | translate}}</b>
            }
            @if (data.resIds.length === 1) {
              <b class="primary highlight">{{data.resource.chrono}}</b>
            }
            @if (data.resIds.length > 1) {
              <b class="primary highlight">{{data.resIds.length}}
              {{'lang.elements' | translate}}</b>
              } ?
            </div>
            <div>
              @if (resourcesErrors.length > 0) {
                <div class="alert-message alert-message-danger mailList">
                  <p>
                    {{'lang.canNotMakeAction' | translate}} :
                  </p>
                  <ul>
                    @for (ressource of resourcesErrors; track ressource) {
                      <li>
                        <b>{{ressource.alt_identifier}}</b> : {{'lang.' + ressource.reason | translate}}
                      </li>
                    }
                  </ul>
                </div>
              }
            </div>
          }
          @if (selectedRes.length > 0) {
            <div>
              <app-note-editor #noteEditor [resIds]="selectedRes"></app-note-editor>
            </div>
          }
        </div>
      }
      @if (showToggle) {
        <div class="row">
          <div class="col-md-12" style="margin: 10px 0px 10px 0px;">
            <mat-slide-toggle name="history" class="primary"
              [title]="'lang.canGoToNextResDesc' | translate" [(ngModel)]="canGoToNextRes" [checked]="canGoToNextRes">
              {{'lang.canGoToNextRes' | translate}}
            </mat-slide-toggle>
          </div>
        </div>
        <mat-divider></mat-divider>
      }
    </div>
    <span class="divider-modal"></span>
    <div mat-dialog-actions class="actions">
      <button mat-raised-button mat-button class="primary" [disabled]="loading || selectedRes.length === 0"
      (click)="onSubmit()">{{'lang.validate' | translate}}</button>
      <button mat-raised-button mat-button [disabled]="loading" [mat-dialog-close]="">{{'lang.cancel' | translate}}</button>
    </div>
  </div>